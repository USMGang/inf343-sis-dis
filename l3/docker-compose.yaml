version: '3.8'

services:
  director:
    build:
      context: .
      dockerfile: director/Dockerfile
    container_name: director
    ports:
      - "8080:8080"
    networks:
      - mynetwork
    tty: true

  doshbank:
    build:
      context: .
      dockerfile: doshbank/Dockerfile
    container_name: doshbank
    ports:
      - "8081:8081"
    networks:
      - mynetwork
    tty: true

  datanode1:
    build:
      context: .
      dockerfile: datanode/Dockerfile
    container_name: datanode1
    ports:
      - '${DATANODE1_PORT}:${DATANODE1_PORT}'
    env_file:
      - .env
    networks:
      - mynetwork
    command: ["/datanode","1"]

  datanode2:
    build:
      context: .
      dockerfile: datanode/Dockerfile
    container_name: datanode2
    ports:
      - '${DATANODE2_PORT}:${DATANODE2_PORT}'
    env_file:
      - .env
    networks:
      - mynetwork
    command: ["/datanode","2"]

  datanode3:
    build:
      context: .
      dockerfile: datanode/Dockerfile
    container_name: datanode3
    ports:
      - '${DATANODE3_PORT}:${DATANODE3_PORT}'
    env_file:
      - .env
    networks:
      - mynetwork
    command: ["/datanode","3"]

  namenode:
    build:
      context: .
      dockerfile: namenode/Dockerfile
    container_name: namenode
    ports:
      - "8070:8070"
    networks:
      - mynetwork
    tty: true

networks:
  mynetwork:
    driver: bridge
